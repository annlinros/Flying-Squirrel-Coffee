{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\user\\\\Desktop\\\\shop-coffee\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\shop-coffee\\\\src\\\\context.js\";\nimport React, { Component } from \"react\";\nimport { storeProducts, detailProduct } from \"./data\";\nconst ProductContext = React.createContext();\n\nclass ProductProvider extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      products: [],\n      detailProduct,\n      cart: [],\n      modalProduct: detailProduct,\n      modalOpen: false,\n      cartSubTotal: 0,\n      cartTax: 0,\n      cartTotal: 0\n    };\n\n    this.setProducts = () => {\n      let products = [];\n      storeProducts.forEach(item => {\n        const singleItem = _objectSpread({}, item);\n\n        products = [...products, singleItem];\n      });\n      this.setState({\n        products\n      });\n    };\n\n    this.getProduct = id => {\n      return this.state.products.find(item => item.id === id);\n    };\n\n    this.handleDetail = id => {\n      const product = this.getProduct(id);\n      this.setState({\n        detailProduct: product\n      });\n    };\n\n    this.addToCart = id => {\n      const cartItem = this.getProduct(id);\n      cartItem.count = 1;\n      const price = cartItem.price;\n      cartItem.total = price;\n      this.setState({\n        cart: [...this.state.cart, cartItem]\n      }, () => this.addTotals());\n    };\n\n    this.openModal = id => {\n      const product = this.getProduct(id);\n      console.log(product);\n      this.setState({\n        modalProduct: product,\n        modalOpen: true\n      });\n    };\n\n    this.closeModal = () => {\n      this.setState({\n        modalOpen: false\n      });\n    };\n\n    this.updateAlert = () => {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"toast\",\n        style: \"position: absolute; top: 0; right: 0;\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"toast-header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        class: \"mr-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Item added to Cart!\"), React.createElement(\"button\", {\n        type: \"button\",\n        class: \"ml-2 mb-1 close\",\n        \"data-dismiss\": \"toast\",\n        \"aria-label\": \"Close\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"\\xD7\")))));\n    };\n\n    this.incrementCount = id => {\n      let tempCart = [...this.state.cart];\n      const incrementedCartItem = tempCart.find(item => item.id === id);\n      incrementedCartItem.count += 1;\n      incrementedCartItem.total = incrementedCartItem.price * incrementedCartItem.count;\n      this.setState({\n        cart: [...tempCart]\n      }, this.addTotals());\n    };\n\n    this.decrementCount = id => {\n      let tempCart = [...this.state.cart];\n      const decrementedCartItem = tempCart.find(item => item.id === id);\n      decrementedCartItem.count -= 1;\n\n      if (decrementedCartItem.count === 0) {\n        this.removeCartItem(id);\n      } else {\n        decrementedCartItem.total = decrementedCartItem.price * decrementedCartItem.count;\n        this.setState({\n          cart: [...tempCart]\n        }, this.addTotals());\n      }\n    };\n\n    this.removeCartItem = id => {\n      const newCartItems = this.state.cart.filter(item => id !== item.id);\n      this.setState({\n        cart: [...newCartItems]\n      }, () => this.addTotals());\n    };\n\n    this.resetCart = () => {\n      this.setState({\n        cart: []\n      }, () => {\n        this.setProducts();\n        this.addTotals();\n      });\n    };\n\n    this.addTotals = () => {\n      let cartSubTotal = 0;\n      this.state.cart.map(item => cartSubTotal += item.total);\n      const tempTax = cartSubTotal * 0.1;\n      const cartTax = parseFloat(tempTax.toFixed(2));\n      const cartTotal = cartSubTotal + cartTax;\n      this.setState({\n        cartSubTotal,\n        cartTax,\n        cartTotal\n      });\n    };\n  }\n\n  //  setting \"products on state\"\n  componentDidMount() {\n    this.setProducts();\n  }\n\n  render() {\n    return React.createElement(ProductContext.Provider, {\n      value: _objectSpread({}, this.state, {\n        handleDetail: this.handleDetail,\n        addToCart: this.addToCart,\n        openModal: this.openModal,\n        closeModal: this.closeModal,\n        incrementCount: this.incrementCount,\n        decrementCount: this.decrementCount,\n        removeCartItem: this.removeCartItem,\n        resetCart: this.resetCart\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, this.props.children);\n  }\n\n}\n\nconst ProductConsumer = ProductContext.Consumer;\nexport { ProductProvider, ProductConsumer };","map":{"version":3,"sources":["C:\\Users\\user\\Desktop\\shop-coffee\\src\\context.js"],"names":["React","Component","storeProducts","detailProduct","ProductContext","createContext","ProductProvider","state","products","cart","modalProduct","modalOpen","cartSubTotal","cartTax","cartTotal","setProducts","forEach","item","singleItem","setState","getProduct","id","find","handleDetail","product","addToCart","cartItem","count","price","total","addTotals","openModal","console","log","closeModal","updateAlert","incrementCount","tempCart","incrementedCartItem","decrementCount","decrementedCartItem","removeCartItem","newCartItems","filter","resetCart","map","tempTax","parseFloat","toFixed","componentDidMount","render","props","children","ProductConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { storeProducts, detailProduct } from \"./data\";\r\n\r\nconst ProductContext = React.createContext();\r\n\r\nclass ProductProvider extends Component {\r\n  state = {\r\n    products: [],\r\n    detailProduct,\r\n    cart: [],\r\n    modalProduct: detailProduct,\r\n    modalOpen: false,\r\n    cartSubTotal: 0,\r\n    cartTax: 0,\r\n    cartTotal: 0\r\n  };\r\n  //  setting \"products on state\"\r\n  componentDidMount() {\r\n    this.setProducts();\r\n  }\r\n\r\n  setProducts = () => {\r\n    let products = [];\r\n    storeProducts.forEach(item => {\r\n      const singleItem = { ...item };\r\n      products = [...products, singleItem];\r\n    });\r\n    this.setState({\r\n      products\r\n    });\r\n  };\r\n  // Handling the click event to show Product details.\r\n\r\n  getProduct = id => {\r\n    return this.state.products.find(item => item.id === id);\r\n  };\r\n  handleDetail = id => {\r\n    const product = this.getProduct(id);\r\n    this.setState({\r\n      detailProduct: product\r\n    });\r\n  };\r\n\r\n  // Add to Cart\r\n\r\n  addToCart = id => {\r\n    const cartItem = this.getProduct(id);\r\n    cartItem.count = 1;\r\n    const price = cartItem.price;\r\n    cartItem.total = price;\r\n    this.setState(\r\n      {\r\n        cart: [...this.state.cart, cartItem]\r\n      },\r\n      () => this.addTotals()\r\n    );\r\n  };\r\n\r\n  // Opening and Closing of Modal upon adding items to the cart\r\n\r\n  openModal = id => {\r\n    const product = this.getProduct(id);\r\n    console.log(product);\r\n    this.setState({\r\n      modalProduct: product,\r\n      modalOpen: true\r\n    });\r\n  };\r\n  closeModal = () => {\r\n    this.setState({\r\n      modalOpen: false\r\n    });\r\n  }\r\n  // Update alert upon adding item to cart\r\n  updateAlert = () => {\r\n   return (\r\n     <div\r\n      //  aria-live=\"polite\"\r\n      //  aria-atomic=\"true\"\r\n      //  style=\"position: relative; min-height: 200px;\"\r\n     >\r\n       <div class=\"toast\" style=\"position: absolute; top: 0; right: 0;\">\r\n         <div class=\"toast-header\">\r\n           <strong class=\"mr-auto\">Item added to Cart!</strong>\r\n           <button\r\n             type=\"button\"\r\n             class=\"ml-2 mb-1 close\"\r\n             data-dismiss=\"toast\"\r\n             aria-label=\"Close\"\r\n           >\r\n             <span aria-hidden=\"true\">&times;</span>\r\n           </button>\r\n         </div>\r\n       </div>\r\n     </div>\r\n   );\r\n  }\r\n  // Increment product count in cart\r\n\r\n  incrementCount = id => {\r\n    let tempCart = [...this.state.cart];\r\n\r\n    const incrementedCartItem = tempCart.find(item => item.id === id);\r\n\r\n    incrementedCartItem.count += 1;\r\n    incrementedCartItem.total =\r\n      incrementedCartItem.price * incrementedCartItem.count;\r\n\r\n    this.setState(\r\n      {\r\n        cart: [...tempCart]\r\n      },\r\n      this.addTotals()\r\n    );\r\n  };\r\n  // Decrement product count in cart\r\n\r\n  decrementCount = id => {\r\n    let tempCart = [...this.state.cart];\r\n\r\n    const decrementedCartItem = tempCart.find(item => item.id === id);\r\n\r\n    decrementedCartItem.count -= 1;\r\n    if (decrementedCartItem.count === 0) {\r\n      this.removeCartItem(id);\r\n    } else {\r\n      decrementedCartItem.total =\r\n        decrementedCartItem.price * decrementedCartItem.count;\r\n      this.setState(\r\n        {\r\n          cart: [...tempCart]\r\n        },\r\n        this.addTotals()\r\n      );\r\n    }\r\n  };\r\n  // Remove item from cart\r\n  removeCartItem = id => {\r\n    const newCartItems = this.state.cart.filter(item => id !== item.id);\r\n    this.setState(\r\n      {\r\n        cart: [...newCartItems]\r\n      },\r\n      () => this.addTotals()\r\n    );\r\n  };\r\n\r\n  // Reset cart\r\n  resetCart = () => {\r\n    this.setState({\r\n      cart: []\r\n    }, () => {\r\n      this.setProducts();\r\n      this.addTotals()\r\n    });\r\n  };\r\n  //  Calculate total amount in cart\r\n  addTotals = () => {\r\n    let cartSubTotal = 0;\r\n    this.state.cart.map(item => (cartSubTotal += item.total));\r\n    const tempTax = cartSubTotal * 0.1;\r\n    const cartTax = parseFloat(tempTax.toFixed(2));\r\n    const cartTotal = cartSubTotal + cartTax;\r\n    this.setState({\r\n      cartSubTotal,\r\n      cartTax,\r\n      cartTotal\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <ProductContext.Provider\r\n        value={{\r\n          ...this.state,\r\n          handleDetail: this.handleDetail,\r\n          addToCart: this.addToCart,\r\n          openModal: this.openModal,\r\n          closeModal: this.closeModal,\r\n          incrementCount: this.incrementCount,\r\n          decrementCount: this.decrementCount,\r\n          removeCartItem: this.removeCartItem,\r\n          resetCart: this.resetCart\r\n        }}\r\n      >\r\n        {this.props.children}\r\n      </ProductContext.Provider>\r\n    );\r\n  }\r\n}\r\nconst ProductConsumer = ProductContext.Consumer;\r\nexport { ProductProvider, ProductConsumer };\r\n"]},"metadata":{},"sourceType":"module"}